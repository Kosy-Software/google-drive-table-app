(()=>{"use strict";(()=>{const e=JSON.parse('{"l":{"c":"AIzaSyDFUoIEXWGk0NPtqPjCadqnEpcgxydw9ko","x":"1055348097262-m31jmp68886tmq7hmsa7pgg0fopb9dot.apps.googleusercontent.com"}}');var t=function(e,t,o,n){return new(o||(o=Promise))((function(i,c){function r(e){try{s(n.next(e))}catch(e){c(e)}}function a(e){try{s(n.throw(e))}catch(e){c(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}s((n=n.apply(e,t||[])).next())}))};const o="https://www.googleapis.com/auth/drive.file",n=new Date("1970-01-01T00:00:00Z").getTime();function i(){return t(this,void 0,void 0,(function*(){let i=JSON.parse(localStorage.getItem("google_access_token")||"{}");return new Date(n+((null==i?void 0:i.expires_at)||0)-6e4)<new Date&&(i=yield function(e){return t(this,void 0,void 0,(function*(){return yield function(e){return t(this,void 0,void 0,(function*(){return new Promise(((t,o)=>gapi.load(e,{callback:()=>t({}),onerror:()=>o(),timeout:5e3,ontimeout:()=>o()})))}))}("auth2"),yield new Promise(((t,n)=>{try{gapi.auth2.init({client_id:e,scope:o,fetch_basic_profile:!1});let c=gapi.auth2.getAuthInstance();var i=c.currentUser.get();i.hasGrantedScopes(o)?t(i.getAuthResponse(!0)):c.signIn().then((e=>t(e.getAuthResponse(!0)))).catch((e=>n(e)))}catch(e){n()}}))}))}(e.l.x),localStorage.setItem("google_access_token",JSON.stringify(i))),i}))}var c,r=function(e,t,o,n){return new(o||(o=Promise))((function(i,c){function r(e){try{s(n.next(e))}catch(e){c(e)}}function a(e){try{s(n.throw(e))}catch(e){c(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}s((n=n.apply(e,t||[])).next())}))};!function(t){var o;(function(t){class o{start(){return r(this,void 0,void 0,(function*(){let t=yield i();t||window.close(),(yield this.createPicker(t.access_token,e.l.c)).setVisible(!0)}))}createPicker(e,t){return r(this,void 0,void 0,(function*(){return yield new Promise(((e,t)=>{gapi.load("picker",{callback:()=>e({}),onerror:()=>t(),timeout:5e3,ontimeout:()=>t()})})),(new google.picker.PickerBuilder).addView(google.picker.ViewId.DOCS).setOAuthToken(e).setDeveloperKey(t).enableFeature(google.picker.Feature.NAV_HIDDEN).setOrigin(`${window.location.protocol}//${window.location.host}`).setCallback((e=>{if(e[google.picker.Response.ACTION]==google.picker.Action.PICKED){let t=e[google.picker.Response.DOCUMENTS][0][google.picker.Document.ID];this.sendMessage({type:"google-drive-file-id-changed",payload:t}),window.close()}e[google.picker.Response.ACTION]==google.picker.Action.CANCEL&&window.close()})).build()}))}sendMessage(e){window.opener.postMessage(e,window.location.origin)}}t.Picker=o,(new o).start()})((o=t.Integration||(t.Integration={})).GoogleDrive||(o.GoogleDrive={}))}(c||(c={}))})()})();